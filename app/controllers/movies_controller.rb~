class MoviesController < ApplicationController

  def show
  end

  def index
    setup = Movie.set_options(params, session)
      
      if setup[:redirect]
	flash.keep

	redirect_to(
	  :action => params[:action], :controller => params[:controller],
	  :ratings => setup[:ratings], :order_by => setup[:order_by]
	  )
      end

      @ratings = Movie.ratings
      @filters = if params[:ratings].nil?
	@ratings
      else
	params[:ratings]
      end
	
      @movies = Movie.movies(@filters, setup[:order_by])

      session[:ratings] = setup[:ratings]
      session[:order_by] = setup[:order_by]
  end

  def new
    #default: render 'new' template
  end

  def create
  end

  def edit
  end

  def update
  end

  def destroy
  end
end
    
